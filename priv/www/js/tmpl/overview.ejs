<h1>Overview</h1>

<% if (statistics_level == 'fine') { %>
<div class="section">
<h2>Message Rates</h2>
<div class="updatable">
<%= message_rates(overview.message_stats) %>
<span class="br"></span>
</div>
</div>
<% } %>

<div class="section">
<h2>System Information</h2>
<div class="updatable">
<table class="facts">
  <tr>
    <th>Erlang Nodename</th>
    <td><%= overview.node %></td>
  </tr>
  <tr>
    <th>Operating System PID</th>
    <td><%= overview.os_pid %></td>
  </tr>
  <tr>
    <th>Bound To</th>
    <td><%= overview.bound_to %></td>
  </tr>
  <tr>
    <th>File Descriptors</th>
    <td class="status">
      <div class="<%= fmt_color(overview.fd_used / overview.fd_total) %>">
        <%= overview.fd_used %> / <%= overview.fd_total %>
        <sub>(used/available)</sub>
      </div>
    </td>
  </tr>
  <tr>
    <th>Erlang Processes</th>
    <td class="status">
      <div class="<%= fmt_color(overview.proc_used / overview.proc_total) %>">
        <%= overview.proc_used %> / <%= overview.proc_total %>
        <sub>(used/available)</sub>
      </div>
    </td>
  </tr>
<% if (overview.mem_total != 'memory_monitoring_disabled') { %>
  <tr>
    <th>Memory</th>
    <td class="status">
      <div class="<%= fmt_color(overview.mem_used / overview.mem_total) %>">
        <%= fmt_bytes(overview.mem_used) %> / <%= fmt_bytes(overview.mem_total) %>
        <sub>(used/available)</sub>
      </div>
    </td>
  </tr>
<% } %>
</table>
</div>
</div>

<div class="section-hidden">
<h2>Applications</h2>
<div>
<table class="list">
  <thead>
    <tr>
      <th>Name</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <% for (var i = 0; i < applications.length; i++) { %>
       <tr<%= alt_rows(i)%>>
         <td><abbr title="<%= applications[i].description %>"><%= applications[i].name %></abbr></td>
         <td><%= applications[i].version %></td>
       </tr>
    <% } %>
  </tbody>
</table>
<span class="br"></span>
</div>
</div>

<div class="section-hidden administrator-only">
<h2>Import / Export Configuration</h2>
<div>
  <p>
    The configuration consists of users, virtual hosts, permissions,
    exchanges, queues and bindings. It does not include the contents of
    queues.
  </p>
  <form action="/api/all-configuration" method="post" enctype="multipart/form-data">
    <table class="two-col-layout">
      <tr>
        <td>
          <h3>Export</h3>
          <p>
            <label for="download-filename">Filename for download:</label><br/>
            <input type="text" id="download-filename" value="<%= fmt_download_filename(overview.node) %>" class="wide" />
          </p>
          <p>
            Note: exclusive queues will not be exported.
          </p>
        </td>
        <td>
          <h3>Import</h3>
          <p>
            <label>Configuration file:</label><br/>
            <input type="file" name="file"/>
          </p>
          <p>
            Note: The configuration that is imported will be merged with
            the current configuration. If an error occurs during import,
            any configuration changes made will not be rolled back.
          </p>
        </td>
      </tr>
      <tr>
        <td>
          <p>
            <button id="download-configuration">Download broker configuration</button>
          </p>
        </td>
        <td>
          <p>
            <input type="hidden" name="redirect" value="/mgmt/#/import-succeeded"/>
            <input type="submit" value="Upload broker configuration"/>
          </p>
        </td>
      </tr>
    </table>
  </form>
</div>
</div>

<% if (overview.statistics_level != 'fine') { %>
<div class="section-hidden">
<h2>Message Rates Disabled</h2>
<div>
<p>
  The statistics level in this RabbitMQ server is currently set to
  <code><%= overview.statistics_level %></code>. Message rates are therefore
  disabled.
</p>
<p>
  To re-enable message rates, edit your configuration file and either
  set <code>collect_statistics</code> to <code>fine</code> in
  the <code>rabbit</code> application, or
  set <code>force_fine_statistics</code> to <code>true</code> in
  the <code>rabbit_management</code> application
</p>
<span class="br"></span>
</div>
</div>
<% } %>
