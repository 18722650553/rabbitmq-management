<h1>Channel: <b><%= channel.name %></b></h1>

<% if (statistics_level == 'fine') { %>
<div class="section">
<h2>Message Rates</h2>
<div class="hider updatable">
<%= message_rates([[channel.message_stats, {}]]) %>
<span class="br"></span>
</div>
</div>
<% } %>

<div class="section">
<h2>Overview</h2>
<div class="hider updatable">
<table class="list">
  <tr>
    <th>Connection</th>
    <th>Virtual host</th>
    <th>Username</th>
    <th>Transactional</th>
    <th>Prefetch count</th>
    <th>Acks uncommitted</th>
    <th>Messages unacknowledged</th>
    <th>Client blocked</th>
  </tr>
  <tr>
    <td><%= link_conn(channel.connection_details.name) %></td>
    <td><%= channel.vhost %></td>
    <td><%= channel.user %></td>
    <td><%= fmt_boolean(channel.transactional) %></td>
    <td><%= channel.prefetch_count %></td>
    <td><%= channel.acks_uncommitted %></td>
    <td><%= channel.messages_unacknowledged %></td>
    <td><%= fmt_boolean(channel.client_flow_blocked) %></td>
  </tr>
</table>
</div>
</div>

<% if (statistics_level == 'fine') { %>
<div class="section-hidden">
<h2>Detailed Message Rates</h2>
<div class="hider updatable">

<table class="two-col-layout">
  <tr>
    <td>
      <h3>Publishes</h3>
      <% if ('publishes' in channel) { %>
      <table class="list">
        <tr>
          <th>Exchange</th>
          <th>publish</th>
        </tr>
        <%
           for (var i = 0; i < channel.publishes.length; i++) {
           var pub = channel.publishes[i];
        %>
           <tr<%= alt_rows(i)%>>
             <td><%= link_exchange(pub.exchange.vhost, pub.exchange.name) %></td>
             <td><%= fmt_rate(pub.stats, 'publish') %></td>
           </tr>
        <% } %>
      </table>
      <% } else { %>
      <p> ... no publishes ...</p>
      <% } %>
    </td>
    <td>
      <h3>Deliveries</h3>
      <% if ('deliveries' in channel) { %>
      <table class="list">
        <tr>
          <th>Queue</th>
          <th>deliver / get</th>
          <th>ack</th>
        </tr>
        <%
           for (var i = 0; i < channel.deliveries.length; i++) {
           var del = channel.deliveries[i];
        %>
           <tr<%= alt_rows(i)%>>
             <td><%= link_queue(del.queue_details.vhost, del.queue_details.name) %></td>
             <td><%= fmt_rate(del.stats, 'deliver_get') %></td>
             <td><%= fmt_rate(del.stats, 'ack') %></td>
           </tr>
        <% } %>
      </table>
      <% } else { %>
      <p> ... no deliveries ...</p>
      <% } %>
    </td>
  </tr>
</table>

<span class="br"></span>
</div>
</div>
<% } %>
