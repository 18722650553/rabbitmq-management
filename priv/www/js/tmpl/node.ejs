<h1>Node <b><%= node.name %></b></h1>

<div class="section">
<h2>Overview</h2>
<div class="hider updatable">
  <!-- TODO make this class="facts" when 23370 is merged. -->
  <table class="list">
    <tr>
      <th>Name</th>
      <th>Mnesia Storage</th>
      <th>OS Pid</th>
      <th>
        File Descriptors
        <sub>(used / available)</sub>
      </th>
      <th>
        Erlang Processes
        <sub>(used / available)</sub>
      </th>
      <th>
        Memory
        <sub>(used / high watermark)</sub>
      </th>
      <th>Statistics</th>
    </tr>
    <tr<%= alt_rows(i)%>>
      <td>
        <%= node.name %>
      </td>
      <td class="c">
        <%= node.type %>
      </td>
<% if (node.running) { %>
      <td class="c"><%= node.os_pid %></td>
      <td class="status">
        <div class="<%= fmt_color(node.fd_used / node.fd_total) %>">
<%= node.fd_used %> / <%= node.fd_total %>
        </div>
      </td>
      <td class="status">
        <div class="<%= fmt_color(node.proc_used / node.proc_total) %>">
          <%= node.proc_used %> / <%= node.proc_total %>
        </div>
      </td>
      <td class="status">
<% if (node.mem_total != 'memory_monitoring_disabled') { %>
       <div class="<%= fmt_color(node.mem_used / node.mem_limit,
                                 MEMORY_THRESHOLDS) %>">
         <%= fmt_bytes(node.mem_used) %> / <%= fmt_bytes(node.mem_limit) %>
       </div>
<% } else { %>
       <%= fmt_bytes(node.mem_used) %>
<% } %>
      </td>
      <td class="c">
       <%= node.statistics_level %>
      </td>
<% } else { %>
      <td class="status" colspan="5">
        <div class="red">
          Node not running
        </div>
      </td>
    </tr>
<% } %>
</table>
</div>
</div>

<div class="section">
<h2>Applications</h2>
<div class="hider updatable">
<% if (node.running) { %>
<table class="list">
    <tr>
      <th>Name</th>
      <th>Version</th>
    </tr>
    <%
      for (var j = 0; j < node.applications.length; j++) {
        var application = node.applications[j];
    %>
       <tr<%= alt_rows(j)%>>
         <td>
           <abbr title="<%= application.description %>">
             <%= application.name %></abbr>
         </td>
         <td><%= application.version %></td>
       </tr>
    <% } %>
</table>
<% } else {%>
<p>...node not running...</p>
<% } %>
</div>
</div>
