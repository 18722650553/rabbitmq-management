<h1>Queue: <%= queue.name %></h1>

<div class="section">
  <h2>Overview</h2>
  <div>
    <table class="facts">
      <tr>
        <th>Virtual host</th>
        <td><%= queue.vhost %></td>
      </tr>
      <tr>
        <th>Durable</th>
        <td><%= fmt_boolean(queue.durable) %></td>
      </tr>
      <tr>
        <th>Auto delete</th>
        <td><%= fmt_boolean(queue.auto_delete) %></td>
      </tr>
      <tr>
        <th>Exclusive owner</th>
        <td>
          <% if (queue.owner_pid != 'none') { %>
          <%= link_conn(queue.owner_pid_details.name) %>
          <% } %>
        </td>
      </tr>
      <tr>
        <th>Consumers</th>
        <td><%= fmt_string(queue.consumers) %></td>
      </tr>
      <tr>
        <th>Memory</th>
        <td><%= fmt_bytes(queue.memory) %></td>
      </tr>
      <tr>
        <th>Messages ready</th>
        <td>
          <%= fmt_string(queue.messages_ready) %> ready<br/>
          <%= fmt_string(queue.messages_unacknowledged) %> unacknowledged<br/>
          <%= fmt_string(queue.messages) %> total
        </td>
      </tr>
      <tr>
        <th>Arguments</th>
        <td>
          <%= format('table', {'table': queue.arguments}) %>
        </td>
      </tr>
    </table>
  </div>
</div>

<div class="section">
  <h2>Bindings</h2>
  <div>
<% if (bindings.length > 0) { %>
    <table class="list">
      <thead>
        <tr>
          <th>Exchange</th>
          <th>Routing Key</th>
          <th>Arguments</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% for (var i = 0; i < bindings.length; i++) { %>
           <tr<%= alt_rows(i)%>>
             <td><%= link_exchange(bindings[i].vhost, bindings[i].exchange) %></td>
             <td><%= bindings[i].routing_key %></td>
             <td><%= bindings[i].arguments %></td>
             <td class="c">
               <form action="#/bindings" method="delete" class="confirm">
                 <input type="hidden" name="vhost" value="<%= bindings[i].vhost %>"/>
                 <input type="hidden" name="exchange" value="<%= fmt_exchange_url(bindings[i].exchange) %>"/>
                 <input type="hidden" name="queue" value="<%= bindings[i].queue %>"/>
                 <input type="hidden" name="properties_key" value="<%= bindings[i].properties_key %>"/>
                 <input type="submit" value="Unbind"/>
               </form>
             </td>
           </tr>
           <% } %>
      </tbody>
    </table>
<% } else { %>
  <p>... no bindings ...</p>
<% } %>
  </div>
</div>

<div class="section-hidden">
  <h2>Add binding</h2>
  <div>
    <form action="#/bindings" method="post">
      <input type="hidden" name="vhost" value="<%= queue.vhost %>"/>
      <input type="hidden" name="queue" value="<%= queue.name %>"/>
      <table class="form">
        <tr>
          <th><label>Exchange:</label></th>
          <td><input type="text" name="exchange" value=""/></td>
        </tr>
        <tr>
          <th><label>Routing Key:</label></th>
          <td><input type="text" name="routing_key" value=""/></td>
        </tr>
        <tr>
          <th><label>Arguments:</label></th>
          <td><input type="hidden" name="arguments" value=""/> (TODO)</td>
        </tr>
      </table>
      <input type="submit" value="Bind"/>
    </form>
  </div>
</div>

<div class="section-hidden">
  <h2>Delete This Queue</h2>
  <div>
    <form action="#/queues" method="delete" class="confirm">
      <input type="hidden" name="vhost" value="<%= queue.vhost %>"/>
      <input type="hidden" name="name" value="<%= queue.name %>"/>
      <input type="submit" value="Delete"/>
    </form>
  </div>
</div>
