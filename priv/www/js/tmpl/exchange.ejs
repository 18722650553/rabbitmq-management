<h1>Exchange: <b><%= fmt_exchange(exchange.name) %></b></h1>

<div class="section">
  <h2>Overview</h2>
  <div>
    <table class="facts">
      <tr><th>Virtual host</th><td><%= exchange.vhost %></td></tr>
      <tr><th>Type</th><td><%= exchange.type %></td></tr>
      <tr><th>Durable</th><td><%= fmt_boolean(exchange.durable) %></td></tr>
      <tr><th>Auto delete</th><td><%= fmt_boolean(exchange.auto_delete) %></td></tr>
      <tr>
        <th>Arguments</th>
        <td><%= fmt_table_short(exchange.arguments) %></td>
      </tr>
    </table>
  </div>
</div>

<div class="section">
  <h2>Bindings</h2>
  <div class="updatable">
    <% if (bindings_destination.length > 0) { %>
      <h3>Incoming to <b><%= fmt_exchange(exchange.name) %></b></h3>
      <table class="bindings">
        <tr>
          <td>
            <%= format('bindings', {'mode': 'exchange_destination', 'bindings': bindings_destination}) %>
          </td>
          <td class="binding-endpoint">
            <span class="arrow">&rarr;</span>
            <span class="object"><%= exchange.name %></span>
          </td>
        </tr>
      </table>
    <% } %>
    <h3>Outgoing from <b><%= fmt_exchange(exchange.name) %></b></h3>
    <table class="bindings">
      <tr>
        <td class="binding-endpoint">
          <span class="object"><%= fmt_exchange(exchange.name) %></span>
          <span class="arrow">&rarr;</span>
        </td>
        <td>
          <%= format('bindings', {'mode': 'exchange_source', 'bindings': bindings_source}) %>
        </td>
      </tr>
    </table>
  </div>
</div>

<% if (exchange.name != "") { %>
<%= format('add-binding', {'mode': 'exchange_source', 'parent': exchange}) %>
<% } %>

<div class="section-hidden">
  <h2>Delete This Exchange</h2>
  <div>
    <form action="#/exchanges" method="delete" class="confirm">
      <input type="hidden" name="vhost" value="<%= exchange.vhost %>"/>
      <input type="hidden" name="name" value="<%= fmt_exchange_url(exchange.name) %>"/>
      <input type="submit" value="Delete"/>
    </form>
  </div>
</div>
